var fs = require("fs");
var mkdirp = require("mkdirp");

//list of directories to prepare
var dirs =
[
	"{out}",
	"{out}/admin",
	"{out}/media"
];

module.exports = function(cb)
{
	var self = this;

	//loop through desired dirs, creating them
	dirs.forEach(function(dir)
	{
		//replace {out} with the output directory
		var path = dir.split("{out}").join(self.dir);
		try
		{
			//mkdirp to create paretn dirs if necessary
			mkdirp.sync(path);
		}
		catch (err)
		{
			self.logger.error("Could not create "+path+".", err);
		}
	});

	cb();
}
